<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   <extension
         id="rpmlintBuilder"
         name="Rpmlint project builder"
         point="org.eclipse.core.resources.builders">
      <builder
            hasNature="true">
         <run
               class="org.eclipse.linuxtools.rpm.rpmlint.builder.RpmlintBuilder">
         </run>
      </builder>
   </extension>
   <extension
         id="rpmlintNature"
         name="Rpmlint Projet Nature"
         point="org.eclipse.core.resources.natures">
      <runtime>
         <run
               class="org.eclipse.linuxtools.rpm.rpmlint.builder.RpmlintNature">
         </run>
      </runtime>
      <builder id="org.eclipse.linuxtools.rpm.rpmlint.rpmlintBuilder"/>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
         <category
            name="Rpmlint Commands"
            description="Specfile Editor Commands"
            id="rpmlint.category"/>
         <command
            categoryId="rpmlint.category"
            name="Toggle Rpmlint"
            id="rpmlint.toggleRpmlint.command"/>
         <command
            categoryId="rpmlint.category"
            name="Run rpmlint"
            id="rpmlint.runRpmlint.command"/>
   </extension>
   <extension point="org.eclipse.ui.handlers">
    	<handler
         	class="org.eclipse.linuxtools.rpm.rpmlint.actions.ToggleRpmlintNatureAction"
         	commandId="rpmlint.toggleRpmlint.command" />
   		<handler
         	class="org.eclipse.linuxtools.rpm.rpmlint.actions.RunRpmlintAction"
         	commandId="rpmlint.runRpmlint.command" />
   </extension>
   <extension
         point="org.eclipse.ui.menus">
         <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <command
               commandId="rpmlint.toggleRpmlint.command"
               label="Add/Remove Rpmlint Warnings" >
                <visibleWhen>
   		<iterate operator="and" ifEmpty="false">
      			<adapt type="org.eclipse.core.resources.IProject">
      			</adapt>
   		</iterate>
        </visibleWhen>
               
               </command>
         <command
               commandId="rpmlint.runRpmlint.command"
               label="Run Rpmlint ">
               <visibleWhen>
  <iterate operator="and" ifEmpty="false">
    <or>
      <adapt type="org.eclipse.core.resources.IResource">
         <or>
            <test property="org.eclipse.core.resources.name" value="*.rpm"/> 
            <test property="org.eclipse.core.resources.name" value="*.spec"/> 
         </or>
      </adapt>
      <adapt type="org.eclipse.jface.text.ITextSelection" />
    </or>
   </iterate>
</visibleWhen>
               
               </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="org.eclipse.linuxtools.rpm.ui.editor.mainpage"
            class="org.eclipse.linuxtools.rpm.rpmlint.preferences.RpmlintPreferencePage"
            id="org.eclipse.linuxtools.rpm.rpmlint.preferences.rpmlintPreferencePage"
            name="Rpmlint"/>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer class="org.eclipse.linuxtools.rpm.rpmlint.preferences.PreferenceInitializer"/>
   </extension>
   <extension
         id="rpmlintProblem"
         name="Rpmlint Problem"
         point="org.eclipse.core.resources.markers">
      <super type="org.eclipse.core.resources.problemmarker"/>
      <super type="org.eclipse.core.resources.textmarker"/>
      <persistent value="true"/>
      <attribute name="rpmlintErrorId"/>
      <attribute name="rpmlintrefferedContent"/>
   </extension>
   <extension
         point="org.eclipse.ui.ide.markerResolution">
      <markerResolutionGenerator
            class="org.eclipse.linuxtools.rpm.rpmlint.resolutions.RpmlintMarkerResolutionGenerator"
            markerType="org.eclipse.linuxtools.rpm.rpmlint.rpmlintProblem"/>
   </extension>
   
</plugin>
